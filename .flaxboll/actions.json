{"1770836872947":{"actionType":"saveAll","createdAt":"1770836872947","actionID":"1770836872947","userID":"#TEMP","path":"system.capsules.173c20ee-621c-4438-9164-32bc13d3365e.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"() => {\n  const cart = tools.getCtData(\"sc.C4.forms.iptsChanges.products\") || [];\n\n  const parsePrice = (p) => {\n    if (!p) return 0;\n\n    return Number(\n      p.replace(\"R$\", \"\").replace(/\\./g, \"\").replace(\",\", \".\").trim()\n    );\n  };\n\n  const total = cart.reduce((sum, item) => sum + parsePrice(item.price), 0);\n\n  const formatted = total.toLocaleString(\"pt-BR\", {\n    style: \"currency\",\n    currency: \"BRL\",\n  });\n\n  tools.functions.setVar({\n    args: \"\",\n    pass: {\n      keyPath: [\"sc.C4.forms.iptsChanges.totalPrice\"],\n      value: formatted,\n    },\n  });\n\n  console.log(\"ðŸ’° Total salvo (formatado):\", formatted);\n\n  return formatted;\n}\n","newValue":"() => {\n  const cart = tools.getCtData(\"sc.C4.forms.iptsChanges.products\") || [];\n\n  const parsePrice = (p) => {\n    if (!p) return 0;\n\n    return Number(\n      p.replace(\"R$\", \"\").replace(/\\./g, \"\").replace(\",\", \".\").trim()\n    );\n  };\n\n  const total = cart.reduce((sum, item) => sum + parsePrice(item.price), 0);\n\n  const formatted = total.toLocaleString(\"pt-BR\", {\n    style: \"currency\",\n    currency: \"BRL\",\n  });\n\n  tools.functions.setVar({\n    args: \"\",\n    pass: {\n      keyPath: [\"sc.C4.forms.iptsChanges.totalPrice\"],\n      value: formatted,\n    },\n  });\n\n  console.log(\"ðŸ’° Total salvo (formatado):\", formatted);\n\n  return formatted;\n}"}}