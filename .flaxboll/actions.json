{"1757098201511":{"actionType":"saveAll","createdAt":"1757098201511","actionID":"1757098201511","userID":"#TEMP","path":"system.capsules.16598b04-57af-4216-886c-a2c32e48d3c4.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"() => {\n  const input = document.createElement(\"input\");\n  input.type = \"file\";\n  input.accept = \"image/*\";\n\n  input.onchange = (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      console.log(\"Nenhum arquivo selecionado.\");\n      return;\n    }\n\n    // Criar o FileReader para converter em Base64\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const base64 = reader.result; // DataURL (ex: \"data:image/png;base64,....\")\n\n      // Salva o arquivo original\n      tools.functions.setVar({\n        args: \"\",\n        pass: {\n          keyPath: [\"sc.a3.localFile\"],\n          value: [file]\n        }\n      });\n\n      // Salva o DataURL para o preview\n      tools.functions.setVar({\n        args: \"\",\n        pass: {\n          keyPath: [\"sc.a3.previewUrl\"],\n          value: [base64]\n        }\n      });\n\n      console.log(\"Preview pronto:\", base64.substring(0, 50) + \"...\");\n    };\n\n    reader.readAsDataURL(file); // Converte o arquivo em Base64\n  };\n\n  input.click();\n}\n","newValue":"() => {\n  const input = document.createElement(\"input\");\n  input.type = \"file\";\n  input.accept = \"image/*\";\n\n  input.onchange = (e) => {\n    const file = e.target.files[0];\n    if (!file) {\n      console.log(\"Nenhum arquivo selecionado.\");\n      return;\n    }\n\n    // Criar o FileReader para converter em Base64\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const base64 = reader.result; // DataURL (ex: \"data:image/png;base64,....\")\n\n      // Salva o arquivo original\n      tools.functions.setVar({\n        args: \"\",\n        pass: {\n          keyPath: [\"sc.a3.localFile\"],\n          value: [file]\n        }\n      });\n\n      // Salva o DataURL para o preview\n      tools.functions.setVar({\n        args: \"\",\n        pass: {\n          keyPath: [\"sc.a3.previewUrl\"],\n          value: [base64]\n        }\n      });\n\n      console.log(\"Preview pronto:\", base64.substring(0, 50) + \"...\");\n    };\n\n    reader.readAsDataURL(file); // Converte o arquivo em Base64\n  };\n\n  input.click();\n}"}}