{"1752261581826":{"actionType":"saveAll","createdAt":"1752261581826","actionID":"1752261581826","userID":"#TEMP","path":"system.capsules.4e11074c-5b8c-4be9-b431-175ac9e313fb.capsUseCodeInfo.capsUseDescription.en","oldValue":"() => {\n  const email = tools.getCtData(\"sc.adm.login.forms.email\");\n  const password = tools.getCtData(\"sc.adm.login.forms.password\");\n  const users = tools.getCtData(\"sc.adm.login.db.users\") || [];\n\n  if (!email || email.trim() === \"\") {\n    console.log(\"Por favor, preencha o e-mail.\");\n    return;\n  }\n\n  if (!password || password.trim() === \"\") {\n    console.log(\"Por favor, preencha a senha.\");\n    return;\n  }\n\n  const userMatch = users.find(\n    (user) => user.userEmail === email && user.userPassword === password\n  );\n\n  if (!userMatch) {\n    console.log(\"E-mail ou senha incorretos.\");\n    return;\n  }\n\n  console.log(\"Login OK\");\n\n  tools.goTo(\"admDash\");\n}","newValue":"() => {\n  const email = tools.getCtData(\"sc.adm.login.forms.email\");\n  const password = tools.getCtData(\"sc.adm.login.forms.password\");\n  const users = tools.getCtData(\"sc.adm.login.db.users\") || [];\n\n  if (!email || email.trim() === \"\") {\n    console.log(\"Por favor, preencha o e-mail.\");\n    return;\n  }\n\n  if (!password || password.trim() === \"\") {\n    console.log(\"Por favor, preencha a senha.\");\n    return;\n  }\n\n  const userMatch = users.find(\n    (user) => user.userEmail === email && user.userPassword === password\n  );\n\n  if (!userMatch) {\n    console.log(\"E-mail ou senha incorretos.\");\n    return;\n  }\n\n  // Salva o usuário logado na sessão\n  const sessionPath = \"sc.adm.session.user\";\n  const sessionData = { keyPath: [sessionPath], value: [userMatch] };\ntools.functions.setVar({ args: \"\", pass: sessionData });\n\n  console.log(\"Login OK\");\n\n  tools.goTo(\"admDash\");\n}\n"}}