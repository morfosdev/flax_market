{"1766767794262":{"actionType":"saveAll","createdAt":"1766767794262","actionID":"1766767794262","userID":"#TEMP","path":"system.capsules.d3dc8f3b-3781-4a75-8ca8-6ccd378661e4.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"","newValue":"async () => {\n  // Lista de vari√°veis a verificar\n  const requiredFields = [\n    \"sc.a4.editData.product.label\",\n    \"sc.a4.editData.product.price\",\n    \"sc.a4.editData.product.categories\",\n    \"sc.a4.editData.product.slug\",\n    \"sc.a4.editData.product.sku\",\n    \"sc.a4.editData.product.description\",\n    \"sc.a4.editData.product.stock\",\n    \"sc.a4.editData.product.availableQuantity\",\n    \"sc.a4.editData.product.date\",\n  ];\n\n  const getVal = (path) => tools.getCtData(path);\n\n  const allFilled = requiredFields.every((path) => {\n    const value = getVal(path);\n    return value !== undefined && value !== null && value !== \"\";\n  });\n\n  // ‚õî SE FALTAR ALGUM CAMPO, PARA O FLUXO AQUI\n  if (!allFilled) {\n    console.log(\"‚ùå Existem campos obrigat√≥rios vazios.\");\n    return;\n  }\n\n  console.log(\"‚úî Todos os campos preenchidos! Atualizando produto...\");\n\n  // üî• INICIALIZA√á√ÉO FIREBASE (necess√°ria!)\n  let fbInit = tools.getCtData(\"all.temp.fireInit\");\n\n  if (!fbInit) {\n    const { initializeApp, getApps } = await import(\"firebase/app\");\n    const cfg = tools.getCtData(\"all.temp.fireConfig\");\n\n    fbInit = getApps().length ? getApps()[0] : initializeApp(cfg);\n\n    tools.setData({\n      path: \"all.temp.fireInit\",\n      value: fbInit,\n    });\n  }\n\n  // Importa Firestore\n  const { getFirestore, doc, updateDoc } = await import(\"firebase/firestore\");\n  const db = getFirestore(fbInit);\n\n  // ID do documento\n  const docId = getVal(\"sc.a4.editData.product.docId\");\n  if (!docId) {\n    console.log(\"‚ùå Nenhum docId encontrado.\");\n    return;\n  }\n\n  // Dados completos do produto\n  const productData = getVal(\"sc.a4.editData.product\");\n\n  try {\n    // üîÑ Update no documento\n    await updateDoc(doc(db, \"productsEcommerce\", docId), productData);\n\n    console.log(\"‚úî Produto atualizado com sucesso!\");\n\n    // üßπ Limpar dados depois do update\n    tools.setData({\n      path: \"sc.a4.editData.product\",\n      value: {},\n    });\n\n    console.log(\"üßπ Vari√°veis limpas ap√≥s o update.\");\n\n    // ‚úÖ Redirecionar para a tela a2AdmProducts\n    tools.goTo(\"a2AdmProducts\");\n  } catch (err) {\n    console.log(\"üî• Erro ao atualizar:\", err);\n  }\n};\n"},"1766767794263":{"actionType":"saveAll","createdAt":"1766767794263","actionID":"1766767794263","userID":"#TEMP","path":"system.capsules.d3dc8f3b-3781-4a75-8ca8-6ccd378661e4.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"async () => {\n  // Lista de vari√°veis a verificar\n  const requiredFields = [\n    \"sc.a4.editData.product.label\",\n    \"sc.a4.editData.product.price\",\n    \"sc.a4.editData.product.categories\",\n    \"sc.a4.editData.product.slug\",\n    \"sc.a4.editData.product.sku\",\n    \"sc.a4.editData.product.description\",\n    \"sc.a4.editData.product.stock\",\n    \"sc.a4.editData.product.availableQuantity\",\n    \"sc.a4.editData.product.date\",\n  ];\n\n  const getVal = (path) => tools.getCtData(path);\n\n  const allFilled = requiredFields.every((path) => {\n    const value = getVal(path);\n    return value !== undefined && value !== null && value !== \"\";\n  });\n\n  // ‚õî SE FALTAR ALGUM CAMPO, PARA O FLUXO AQUI\n  if (!allFilled) {\n    console.log(\"‚ùå Existem campos obrigat√≥rios vazios.\");\n    return;\n  }\n\n  console.log(\"‚úî Todos os campos preenchidos! Atualizando produto...\");\n\n  // üî• INICIALIZA√á√ÉO FIREBASE (necess√°ria!)\n  let fbInit = tools.getCtData(\"all.temp.fireInit\");\n\n  if (!fbInit) {\n    const { initializeApp, getApps } = await import(\"firebase/app\");\n    const cfg = tools.getCtData(\"all.temp.fireConfig\");\n\n    fbInit = getApps().length ? getApps()[0] : initializeApp(cfg);\n\n    tools.setData({\n      path: \"all.temp.fireInit\",\n      value: fbInit,\n    });\n  }\n\n  // Importa Firestore\n  const { getFirestore, doc, updateDoc } = await import(\"firebase/firestore\");\n  const db = getFirestore(fbInit);\n\n  // ID do documento\n  const docId = getVal(\"sc.a4.editData.product.docId\");\n  if (!docId) {\n    console.log(\"‚ùå Nenhum docId encontrado.\");\n    return;\n  }\n\n  // Dados completos do produto\n  const productData = getVal(\"sc.a4.editData.product\");\n\n  try {\n    // üîÑ Update no documento\n    await updateDoc(doc(db, \"productsEcommerce\", docId), productData);\n\n    console.log(\"‚úî Produto atualizado com sucesso!\");\n\n    // üßπ Limpar dados depois do update\n    tools.setData({\n      path: \"sc.a4.editData.product\",\n      value: {},\n    });\n\n    console.log(\"üßπ Vari√°veis limpas ap√≥s o update.\");\n\n    // ‚úÖ Redirecionar para a tela a2AdmProducts\n    tools.goTo(\"a2AdmProducts\");\n  } catch (err) {\n    console.log(\"üî• Erro ao atualizar:\", err);\n  }\n};\n","newValue":"async () => {\n  // Lista de vari√°veis a verificar\n  const requiredFields = [\n    \"sc.a4.editData.product.label\",\n    \"sc.a4.editData.product.price\",\n    \"sc.a4.editData.product.categories\",\n    \"sc.a4.editData.product.slug\",\n    \"sc.a4.editData.product.sku\",\n    \"sc.a4.editData.product.description\",\n    \"sc.a4.editData.product.stock\",\n    \"sc.a4.editData.product.availableQuantity\",\n    \"sc.a4.editData.product.date\",\n  ];\n\n  const getVal = (path) => tools.getCtData(path);\n\n  const allFilled = requiredFields.every((path) => {\n    const value = getVal(path);\n    return value !== undefined && value !== null && value !== \"\";\n  });\n\n  // ‚õî SE FALTAR ALGUM CAMPO, PARA O FLUXO AQUI\n  if (!allFilled) {\n    console.log(\"‚ùå Existem campos obrigat√≥rios vazios.\");\n    return;\n  }\n\n  console.log(\"‚úî Todos os campos preenchidos! Atualizando produto...\");\n\n  // üî• INICIALIZA√á√ÉO FIREBASE (necess√°ria!)\n  let fbInit = tools.getCtData(\"all.temp.fireInit\");\n\n  if (!fbInit) {\n    const { initializeApp, getApps } = await import(\"firebase/app\");\n    const cfg = tools.getCtData(\"all.temp.fireConfig\");\n\n    fbInit = getApps().length ? getApps()[0] : initializeApp(cfg);\n\n    tools.setData({\n      path: \"all.temp.fireInit\",\n      value: fbInit,\n    });\n  }\n\n  // Importa Firestore\n  const { getFirestore, doc, updateDoc } = await import(\"firebase/firestore\");\n  const db = getFirestore(fbInit);\n\n  // ID do documento\n  const docId = getVal(\"sc.a4.editData.product.docId\");\n  if (!docId) {\n    console.log(\"‚ùå Nenhum docId encontrado.\");\n    return;\n  }\n\n  // Dados completos do produto\n  const productData = getVal(\"sc.a4.editData.product\");\n\n  try {\n    // üîÑ Update no documento\n    await updateDoc(doc(db, \"productsEcommerce\", docId), productData);\n\n    console.log(\"‚úî Produto atualizado com sucesso!\");\n\n    // üßπ Limpar dados depois do update\n    tools.setData({\n      path: \"sc.a4.editData.product\",\n      value: {},\n    });\n\n    console.log(\"üßπ Vari√°veis limpas ap√≥s o update.\");\n\n    // ‚úÖ Redirecionar para a tela a2AdmProducts\n    tools.goTo(\"a2AdmProducts\");\n  } catch (err) {\n    console.log(\"üî• Erro ao atualizar:\", err);\n  }\n}"}}